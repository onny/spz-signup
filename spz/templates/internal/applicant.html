{% extends 'internal/internal.html' %}
{% from 'formhelpers.html' import render_input, render_option %}

{% block caption %}
Bewerber: {{ form.first_name.data ~ " " ~ form.last_name.data }}
{% endblock caption %}


{% block internal_body %}
<div class="row">
    <div class="col-lg-12">
		<form class="form-horizontal" method="post">
			{{ form.hidden_tag() }}
			<fieldset>
				<legend>Persönliche Angaben</legend>
				{{ render_input(form.first_name, required=False) }}
				{{ render_input(form.last_name, required=False) }}
				{{ render_input(form.phone, required=False) }}
				{{ render_input(form.mail, required=False) }}
				{{ render_input(form.tag, required=False) }}
				{{ render_option(form.origin) }}
			</fieldset>

            <legend>Kurswünsche</legend>
            <table class="table table-striped">
                <tbody>
				{% for attendance in form.get_attendances() %}
                    <tr>
                        <td>
							<a href="{{ url_for('course', id=attendance.course.id ) }}"> {{attendance.course.language.name }} {{attendance.course.level}} </a>
                        </td>
                        <td>
<a href="{{ url_for('status', applicant_id=attendance.applicant.id, course_id=attendance.course.id) }}">
{{ 'Warteliste' if attendance.waiting else 'Fester Platz' }}
{% if not attendance.waiting and not attendance.amountpaid > 0 %}, Gebühren{{ 'pflichtig' if attendance.has_to_pay else 'frei' }}{% endif %}
{% if not attendance.waiting and attendance.has_to_pay %}, {{ 'Ermäßigt' if attendance.discounted else 'Vollzahler' }} {% endif %}
{% if not attendance.waiting and attendance.has_to_pay and attendance.amountpaid > 0 %}, {{ 'Barbezahlt:' if attendance.paidbycash else 'Überwiesen:' }} {{attendance.amountpaid}} &euro; {% endif %}
</a>
                        </td>
                    </tr>
				{% endfor %}
                </tbody>
            </table>

			<fieldset>
				<div class="form-group">
					<div class="col-lg-8 col-lg-offset-2">
						<button type="submit" class="btn btn-primary">Änderungen speichern</button>
					</div>
				</div>
			</fieldset>
			
		</form>
    </div>
</div>
{% endblock internal_body %}

{# vim: set tabstop=4 shiftwidth=4 expandtab: #}
