{% extends 'baselayout.html' %}
{% from 'formhelpers.html' import render_input, render_option %}


{% block body %}
<div class="row">
    <div class="col col-lg-12">
        <div class="page-header">
            <h1>Anmeldung</h1>
        </div>
    </div>
</div>
<div class="row">
    <div class="col col-lg-12">
        <form class="form-horizontal" data-persist="garlic" data-validate="parsley" method="post">
            {{ form.hidden_tag() }}

            {# TODO: group into formsets, instead of ugly rows.. #}
            <div class="row">
            {{ render_input(form.first_name, placeholder='Max', required_extras='autofocus="autofocus"') }}
            </div>

            <div class="row">
            {{ render_input(form.last_name, placeholder='Mustermann') }}
            </div>

            <div class="row">
            {{ render_input(form.phone) }}
            </div>

            <div class="row">
            {{ render_input(form.mail, placeholder='max.mustermann@example.com', required_extras='data-type="email" data-trigger="change"') }}
            </div>

            <div class="row">
            {{ render_option(form.origin, required=False) }}
            </div>

            <div class="row">
            {{ render_input(form.tag) }}
            </div>

            <div class="row kit-only">
            {{ render_option(form.degree, required=False) }}
            </div>

            <div class="row kit-only">
            {{ render_input(form.semester, type='number', required=False, required_extras='step="1" type="range" min="1" max="16"') }}
            </div>

            <div class="row">
            {{ render_option(form.languages) }}
            </div>

            <div class="row">
            {{ render_option(form.courses, required=True, required_extras='data-trigger="change"') }}
            </div>

            <div class="row">
                <div class="col col-lg-8 col-offset-2">
                    <button type="submit" class="btn btn-default btn-large btn-block">Anmelden</button>
                    <button type="reset" class="btn btn-default btn-large btn-block">Zur√ºcksetzen</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock body %}


{% block scripts %}
<script>
    $('.kit-only').hide();

    $('#languages').change(function() {
        /* TODO: filter course list based on this selection */
    });

    $('#origin').change(function() {
        if ($(this).find('option:selected:contains(\'KIT\')').length > 0) {
            $('.kit-only').show();
        } else {
            $('.kit-only').hide();
        }
    });

    $('#mail').on('blur', function() {
        $(this).mailcheck({
            domains: mailcheckDomains['domains'],
            topLevelDomains: mailcheckDomains['topLevelDomains'],

            suggested: function(element, suggestion) {
                console.log(suggestion)
            },

            empty: function(element) {
                // nop
            }
        });
    });
</script>
{% endblock scripts %}
{# vim: set tabstop=4 shiftwidth=4 expandtab: #}
