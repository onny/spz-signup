{# Various helpers to render form fields #}
{# Independent short macros, to allow for greater flexibility #}


{% macro render_input(field, width=12, placeholder=None, required=True, required_extras=None, type="text") %}
<div class="form-group col-md-{{width}}{% if field.errors %} has-error{% endif %}">
    <label for="{{ field.id }}" class="control-label">{{ field.label }}</label>
    <input type="{{ type }}" class="form-control" id="{{ field.id }}" name="{{ field.id }}"{% if field.data %} value="{{ field.data }}" {% endif %}placeholder="{{ placeholder|default('', true) }}"{% if required %} data-required="true"{% endif %}{{ (' ' ~ required_extras|safe) if required_extras }}>
    {% for error in field.errors %}
    <span class="label label-danger">{{ error }}</span>
    {% endfor %}
</div>
{% endmacro %}


{% macro render_textarea(field, width=12, placeholder=None, required=True, required_extras=None) %}
<div class="form-group col-md-{{width}}{% if field.errors %} has-error{% endif %}">
    <label for="{{ field.id }}" class="control-label">{{ field.label }}</label>
    <textarea class="form-control" rows="10" id="{{ field.id }}" name="{{ field.id }}" placeholder="{{ placeholder|default('', true) }}"{% if required %} data-required="true"{% endif %}{{ (' ' ~ required_extras|safe) if required_extras }}>{% if field.data %}{{ field.data }}{% endif %}</textarea>
    {% for error in field.errors %}
    <span class="label label-danger">{{ error }}</span>
    {% endfor %}
</div>
{% endmacro %}


{% macro render_option(field, width=12, placeholder=None, required=True, required_extras=None) %}
<div class="form-group col-md-{{width}}{% if field.errors %} has-error{% endif %}">
    <label for="{{ field.id }}" class="control-label">{{ field.label }}</label>
    <select class="form-control" id="{{ field.id }}" name="{{ field.id }}"{% if required %} data-required="true"{% endif %}{{ (' ' ~ required_extras|safe) if required_extras }}>
        <option selected="selected">{{ placeholder|default('', true) }}</option>
        {% for id, name in field.choices %}
        <option value="{{ id }}">{{ name }}</option>
        {% endfor %}
    </select>
    {% for error in field.errors %}
    <span class="label label-danger">{{ error }}</span>
    {% endfor %}
</div>
{% endmacro %}


{% macro render_optgroup(field, width=12, placeholder=None, required=True, required_extras=None) %}
<div class="form-group col-md-{{width}}{% if field.errors %} has-error{% endif %}">
    <label for="{{ field.id }}" class="control-label">{{ field.label }}</label>
    <select class="form-control" id="{{ field.id }}" name="{{ field.id }}"{% if required %} data-required="true"{% endif %}{{ (' ' ~ required_extras|safe) if required_extras }}>
        <option selected="selected">{{ placeholder|default('', true) }}</option>
        {% for group in field.choices %}
        <optgroup label="{{ group[0] }}">
            {% for id, name in group[1] %}
            <option value="{{ id }}">{{ name }}</option>
            {% endfor %}
        </optgroup>
        {% endfor %}
    </select>
    {% for error in field.errors %}
    <span class="label label-danger">{{ error }}</span>
    {% endfor %}
</div>
{% endmacro %}


{# vim: set tabstop=4 shiftwidth=4 expandtab: #}
